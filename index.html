<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- üîπ SEO & Social Meta -->
  <meta name="title" content="SSIA: Vanguard Chronicles ‚Äî Team Builder" />
  <meta name="description" content="Official SSIA: Vanguard Chronicles Team Builder by TSBC Games. Build your dream squad of agents, princesses, and specialists, then evaluate elemental synergy with the Counter System." />
  <meta name="keywords" content="SSIA Vanguard Chronicles, Team Builder, Tactical RPG, RPG Maker VX Ace, TSBC Games, Gacha, Elemental Counter System" />
  <meta name="author" content="TSBC Games" />

  <meta property="og:title" content="SSIA: Vanguard Chronicles ‚Äî Team Builder" />
  <meta property="og:description" content="Pick up to 4 members and test your team synergy in this tactical RPG-inspired team builder." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="preview.png" />
  <meta property="og:url" content="https://your-site-link.com" />

  <title>SSIA: Vanguard Chronicles ‚Äî Team Builder</title>

  <!-- Genshin-style font -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #1a1a28;
      --panel: rgba(25,25,38,0.85);
      --text: #fefdf8;
      --muted: #c6c3b4;
      --accent: #f9d56e;
      --ring: #d4b26e;
      --chip: #2a2a3f;
      --good: #8df0b2;
      --warn: #ffd27a;
      --bad: #ff9898;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin:0; }
    body {
      font-family: "Cinzel", serif;
      background: url("genshin-style-bg.jpg") no-repeat center center fixed, #1a1a28;
      background-size: cover;
      color: var(--text);
      font-size: 16px;
    }
    header {
      text-align: center;
      padding: 20px;
      background: linear-gradient(90deg, rgba(40,30,10,0.9), rgba(20,20,15,0.9));
      border-bottom: 2px solid var(--ring);
    }
    .title { font-weight: 800; font-size: 1.8rem; color: var(--accent); }
    .subtitle { font-size: 1rem; color: var(--muted); }
    .container { padding: 16px; max-width: 1200px; margin: 0 auto;
      display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media (min-width: 980px) { .container { grid-template-columns: 1.2fr 0.8fr; } }

    /* Panels */
    .panel {
      background: var(--panel); border: 2px solid var(--ring); border-radius: 20px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.4);
    }
    .panel h2 {
      margin: 0; padding: 14px 16px; border-bottom: 1px solid var(--ring);
      font-size: 1.2rem; color: var(--accent);
    }

    /* Roster */
    .roster { display: grid; gap: 10px; padding: 12px;
              grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); }
    .card {
      border: 2px solid var(--ring);
      background: linear-gradient(180deg,rgba(50,50,70,0.9),rgba(20,20,30,0.95));
      border-radius: 20px;
      padding: 12px;
      display: grid; gap: 8px;
      transition: transform .2s, box-shadow .2s;
    }
    .card:hover { transform: scale(1.05); box-shadow: 0 12px 28px rgba(0,0,0,0.55); }
    .name { font-weight: 700; color: var(--accent); }
    .row { display: flex; gap: 8px; flex-wrap: wrap; }
    .badge {
      padding: 4px 8px; border-radius: 999px;
      font-size: .78rem; border: 1px solid var(--ring);
      background: rgba(255,255,255,0.05);
    }
    .badge.star { color: #ffd369; font-weight: 700; font-size: 1rem; }
    .btn {
      background: rgba(249,213,110,0.15);
      border: 1px solid var(--accent); color: var(--accent);
      border-radius: 12px; padding: 8px 10px;
      font-weight: 700; cursor: pointer;
    }

    /* Portraits */
    .portrait {
      width: 100%; border-radius: 12px; margin-bottom: 8px;
    }
    .bio {
      font-size: 0.8rem; color: var(--muted);
      border-top: 1px dashed var(--ring); padding-top: 6px;
    }

    /* Search */
    .search-box {
      padding: 10px 16px;
      border-bottom: 1px solid var(--ring);
      background: rgba(20,20,25,0.5);
    }
    .search-box input {
      width: 100%; padding: 10px;
      border-radius: 12px; border: 1px solid var(--ring);
      background: rgba(30,30,40,0.9);
      color: var(--text); font-size: 1rem;
    }

    /* Team slots */
    .team-wrap { padding: 12px; display: grid; gap: 12px; }
    .slots { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); }
    .slot {
      min-height: 100px; border: 2px dashed var(--ring);
      border-radius: 16px; padding: 10px;
      background: rgba(15,15,25,0.8); display: grid;
      place-content: center; text-align: center;
    }
    .slot.filled { border-style: solid; background: rgba(30,30,45,0.9); }
    .slot .x { justify-self:end; background: none; border:0; color: var(--muted); cursor: pointer; }

    /* Synergy meter */
    .meter { height: 14px; border-radius: 999px;
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--ring); overflow: hidden; }
    .meter>i {
      display: block; height: 100%; width: 0;
      background: linear-gradient(90deg,#ff9e8f,#ffd27a,#8df0b2);
      transition: width .35s ease;
    }
    .score-big { font-size: 2rem; font-weight: 800; color: var(--accent); }

    .line { border-bottom: 1px dashed #444; padding: 6px 0; }
    .good{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    footer { text-align: center; padding: 20px; color: var(--muted); }
  </style>
</head>
<body>
<header>
  <div class="title">SSIA: Vanguard Chronicles ‚Äî Team Builder</div>
  <div class="subtitle">Build your squad of 4 heroes and evaluate elemental synergy</div>
</header>

<main class="container">
  <!-- Roster -->
  <section class="panel">
    <h2>Roster</h2>
    <div class="search-box">
      <input type="text" id="search" placeholder="Search characters by name or element...">
    </div>
    <div class="roster" id="roster"></div>
  </section>

  <!-- Team / Analysis -->
  <section class="panel">
    <h2>Team (4 slots)</h2>
    <div class="team-wrap">
      <div class="slots" id="slots"></div>
      <div>
        <div class="row" style="justify-content:space-between;align-items:end">
          <div>
            <div>Synergy Score</div>
            <div class="score-big" id="score">0</div>
          </div>
          <div style="flex:1">
            <div class="meter"><i id="meterFill"></i></div>
          </div>
        </div>
        <div id="breakdown"></div>
      </div>
    </div>
  </section>
</main>

<footer>
  Click a card to <span class="badge">Add</span>. Remove with ‚úñ.
</footer>

<!-- üîπ Hook external profile.js -->
<script src="profile.js"></script>

<script>
/* Elements + Counters */
const ELEMENTS = {
  Pyro:{emoji:"üî•"}, Hydro:{emoji:"üíß"}, Cryo:{emoji:"‚ùÑÔ∏è"},
  Electro:{emoji:"‚ö°"}, Geo:{emoji:"ü™®"}, Aero:{emoji:"üí®"},
  Spectro:{emoji:"üåå"}, Void:{emoji:"üü£"}
};
const COUNTERS = {
  Pyro:["Cryo"], Cryo:["Hydro"], Hydro:["Pyro"],
  Electro:["Hydro"], Geo:[], Aero:[],
  Spectro:[], Void:["Spectro"]
};

/* Roster */
const roster = [
  {id:"jones", name:"Jones Harrison", element:"Pyro", roles:["DPS"], power:5},
  {id:"kenziet", name:"Kenziet Felicia-Harrison", element:"Electro", roles:["DPS"], power:5},
  {id:"hannabi", name:"Hannabi Ingrid Stephanie", element:"Hydro", roles:["Support"], power:5},
  {id:"fritz", name:"Fritz Viermitz", element:"Cryo", roles:["DPS"], power:5},
  {id:"nexon", name:"Nexon Martinez", element:"Geo", roles:["Frontline"], power:4},
  {id:"lucia", name:"Lucia Hoenigsman", element:"Aero", roles:["DPS"], power:4},
  {id:"margaret", name:"Margaret Stephanie", element:"Cryo", roles:["Support"], power:4},
  {id:"ayaka", name:"Kirisame Ayaka", element:"Electro", roles:["DPS"], power:5},
  {id:"elaria", name:"Princess Elaria Solenyra", element:"Spectro", roles:["DPS","Support"], power:5},
  {id:"silverstein", name:"Silverstein Cronin", element:"Cryo", roles:["DPS"], power:5},
  {id:"victor", name:"Victor Stephanie", element:"Hydro", rolee:["Support","Tanker"], power:3},
];

const rosterEl=document.getElementById("roster"), slotsEl=document.getElementById("slots"),
scoreEl=document.getElementById("score"), meterFillEl=document.getElementById("meterFill"),
breakdownEl=document.getElementById("breakdown"), searchEl=document.getElementById("search");
const team=[null,null,null,null];

/* Render roster */
function cardTemplate(agent){
  const e=ELEMENTS[agent.element]; const div=document.createElement("div");
  div.className="card";

  // üîπ Check if profile.js has this agent
  const portrait = (window.profiles && profiles[agent.id] && profiles[agent.id].portrait)
    ? `<img src="${profiles[agent.id].portrait}" alt="${agent.name}" class="portrait">`
    : "";
  const bio = (window.profiles && profiles[agent.id] && profiles[agent.id].bio)
    ? `<div class="bio">${profiles[agent.id].bio}</div>`
    : "";

  div.innerHTML=`
    ${portrait}
    <div class="row" style="justify-content:space-between">
      <div class="name">${agent.name}</div>
      <div class="badge">${e.emoji} ${agent.element}</div>
    </div>
    <div class="row">${agent.roles.map(r=>`<span class="badge">${r}</span>`).join("")}</div>
    <div class="badge star">${"‚òÖ".repeat(agent.power)}</div>
    <button class="btn">Add to Team</button>
    ${bio}
  `;
  div.querySelector(".btn").onclick=()=>addToTeam(agent.id);
  return div;
}
function renderRoster(filter=""){
  rosterEl.innerHTML="";
  roster
    .filter(a=>a.name.toLowerCase().includes(filter)||a.element.toLowerCase().includes(filter))
    .forEach(a=>rosterEl.appendChild(cardTemplate(a)));
}

/* Slots */
function slotTemplate(idx,member){
  const el=document.createElement("div");
  el.className="slot"+(member?" filled":"");
  if(!member){ el.innerHTML=`<div>Empty Slot ${idx+1}</div>`; }
  else{
    el.innerHTML=`<button class="x">‚úñ</button>
      <div>${ELEMENTS[member.element].emoji} ${member.element} <span class="badge star">${"‚òÖ".repeat(member.power)}</span></div>
      <div>${member.name}</div>`;
    el.querySelector(".x").onclick=()=>{team[idx]=null;renderTeam()};
  }
  return el;
}
function renderTeam(){ slotsEl.innerHTML=""; team.forEach((m,i)=>slotsEl.appendChild(slotTemplate(i,m))); analyzeTeam(); }

/* Add logic */
function addToTeam(id){ const a=roster.find(x=>x.id===id);
  if(team.some(m=>m&&m.id===id))return alert("Already in team");
  const slot=team.findIndex(m=>!m); if(slot==-1)return alert("Team full");
  team[slot]=a; renderTeam();
}

/* Analysis */
function analyzeTeam(){
  const members=team.filter(Boolean);
  const unique=[...new Set(members.map(m=>m.element))];
  let score=unique.length*20;
  if(members.some(m=>m.roles.includes("Support")))score+=10;
  if(members.some(m=>m.roles.includes("DPS")))score+=10;
  if(members.some(m=>m.roles.includes("Frontline")))score+=5;
  score=Math.min(100,score);
  scoreEl.textContent=score; meterFillEl.style.width=score+"%";

  breakdownEl.innerHTML="";
  breakdownEl.innerHTML+=`<div class="line"><b>Elements Present:</b> ${unique.map(e=>ELEMENTS[e].emoji+" "+e).join(", ")||"None"}</div>`;
  const counters={};
  unique.forEach(el=>{(COUNTERS[el]||[]).forEach(t=>{counters[t]=(counters[t]||0)+1});});
  const all=Object.keys(ELEMENTS);
  breakdownEl.innerHTML+=`<div class="line"><b>Elemental Counters:</b><br>`+
    all.map(e=>`<span class="${counters[e]>0?"good":"bad"}">${ELEMENTS[e].emoji} ${e}: ${counters[e]>0?"Countered":"Uncountered"}</span>`).join(" , ")+`</div>`;
  const tips=[];
  if(!members.some(m=>m.roles.includes("Support")))tips.push("Add a Support (Hannabi or Margaret).");
  if(!members.some(m=>m.roles.includes("Frontline")))tips.push("Consider a frontline (Nexon).");
  if(!unique.includes("Geo"))tips.push("Geo adds stability.");
  if(!unique.includes("Hydro"))tips.push("Hydro helps counter Pyro and pairs with Electro.");
  if(!tips.length)tips.push("Great balance. You‚Äôre ready!");
  breakdownEl.innerHTML+=`<div class="line"><b>Suggestions:</b> ${tips.join(" ")}</div>`;
}

/* Search */
searchEl.addEventListener("input",()=>renderRoster(searchEl.value.trim().toLowerCase()));

/* Init */
renderRoster(); renderTeam();
</script>
</body>
</html>
